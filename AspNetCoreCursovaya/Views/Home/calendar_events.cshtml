@model IEnumerable<AspNetCoreCursovaya.Models.Event>


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <title>Document</title>
</head>
<body>
    <header>
        <partial name="header" />

        <main>
            <p style="margin-top: 1%; margin-left: 7%;"><a style="color: black; text-decoration: none;" href="@Url.Action("Index")">Главная</a> > Календарь событий</p>
            <h4 style="margin-left: 10%; margin-top: 2%; color: #522473;">< @DateTime.Now.ToString("MMMM") @DateTime.Now.Year ></h4>
            <div class="days_of_week" style="display: flex; justify-content: center; margin-top: 3%;">
                <div style="margin-left: 0%;" class="day_of_week">
                    <p>Понедельник</p>
                </div>

                <div class="day_of_week">
                    <p>Вторник</p>
                </div>

                <div class="day_of_week">
                    <p>Среда</p>
                </div>

                <div class="day_of_week">
                    <p>Четверг</p>
                </div>

                <div class="day_of_week">
                    <p>Пятница</p>
                </div>

                <div class="day_of_week">
                    <p>Суббота</p>
                </div>

                <div class="day_of_week">
                    <p>Воскресенье</p>
                </div>
            </div>

            <div class="days">
                @{

                    var currentDate = DateTime.Now;

                    var eventInCurrentMonth = Model.Where(p => p.DateStart.Value.Month == currentDate.Month && p.DateEnd.Value.Month == currentDate.Month).ToList();

                    int year = DateTime.Now.Year;
                    int month = DateTime.Now.Month;
                    DateTime firstDayOfMonth = new DateTime(year, month, 1);
                    int daysInMonth = DateTime.DaysInMonth(year, month);
                    int dayOfWeek = (int)firstDayOfMonth.DayOfWeek; // получаем порядковый номер дня недели для первого дня месяца
                    int ordinalNumber = (dayOfWeek == 0) ? 7 : dayOfWeek;

                    //int date = Model.DateStart.Value.Day;

                    /////////// 25.04 Добавить вывод эвентов в представление календарь ивентов, разобраться с сопоставлением дат текущего месяца и даты проведения эвента

                    for (int i = 1; i <= 35; i++)
                    {
                            if (eventInCurrentMonth.Any(p => p.DateStart.Value.Day == i))
                            {
                                <div class="day">
                                    <hr>
                                    <h4>@i</h4>
                                    <p>
                                        @eventInCurrentMonth.SingleOrDefault(p => p.DateStart.Value.Day == i).TitleEvent
                                    </p>

                                    <p>
                                        @eventInCurrentMonth.SingleOrDefault(p => p.DateStart.Value.Day == i).TextEvent
                                    </p>

                                    <a href="">Больше событий</a>
                                    <hr style=" vertical-align: bottom;" class="hr_bottom">
                                </div>
                            }
                            else
                            {
                            <div class="day">
                                <hr>
                                <h4>@i</h4>
                                <p>

                                </p>

                                <p>

                                </p>

                                <a href=""></a>
                                <hr class="hr_bottom">
                            </div>
                            }
                    }
                }

            </div>
        </main>

        <partial name="footer" />
</body>
</html>